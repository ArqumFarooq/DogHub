@using DogHub.BL
@using DogHub.Models
@{
    DogHubEntities de = new DogHubEntities();

    var identity = (System.Security.Claims.ClaimsPrincipal)System.Threading.Thread.CurrentPrincipal;
    var id = identity.Claims.Where(c => c.Type == System.Security.Claims.ClaimTypes.Sid).Select(c => c.Value).SingleOrDefault();

    User loggedinUser = new UserBL().GetUserById(Convert.ToInt32(id), de);
}

<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>

    @RenderSection("head", required: false)
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="~/Content/assets/images/Favicons/D-Fav.jpg">

    <!-- Global stylesheets -->
    <link href="~/Content/assets/css/icons/icomoon/styles.css" rel="stylesheet" type="text/css">
    <link href="~/Content/assets/css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="~/Content/assets/css/core.css" rel="stylesheet" type="text/css">
    <link href="~/Content/assets/css/components.css" rel="stylesheet" type="text/css">
    <link href="~/Content/assets/css/colors.css" rel="stylesheet" type="text/css">
    <!-- /global stylesheets -->
    <!-- Core JS files -->
    <script type="text/javascript" src="~/Content/assets/js/plugins/loaders/pace.min.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/core/libraries/jquery.min.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/core/libraries/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/plugins/loaders/blockui.min.js"></script>
    <!-- /core JS files -->
    <!-- Theme JS files -->
    <script type="text/javascript" src="~/Content/assets/js/plugins/visualization/d3/d3.min.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/plugins/visualization/d3/d3_tooltip.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/plugins/forms/styling/switchery.min.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/plugins/forms/styling/uniform.min.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/plugins/forms/selects/bootstrap_multiselect.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/plugins/ui/moment/moment.min.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/plugins/pickers/daterangepicker.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/core/app.js"></script>
    <script type="text/javascript" src="~/Content/assets/js/pages/dashboard.js"></script>
    <!-- /theme JS files -->
    <!-- /Custom add libraries -->
    <script type="text/javascript" src="~/Content/assets/js/plugins/tables/datatables/datatables.min.js"></script>
    <link href="~/Content/assets/css/icons/fontawesome/styles.min.css" rel="stylesheet" type="text/css">
    <link href="~/Content/assets/css/icons/fontawesome/fonts/fontawesome-webfont.svg" rel="stylesheet" type="text/css">

</head>
<body>
    <!-- Main navbar -->
    <div class="navbar navbar-inverse bg-blue">
        <div class="navbar-header">
            <ul class="nav navbar-nav visible-xs-block">
                <a class="navbar-brand" href="#"><img src="~/Content/Images/doghublogo.png" alt=""></a>
                <li><a data-toggle="collapse" data-target="#navbar-mobile"><i class="icon-tree5"></i></a></li>
                <li><a class="sidebar-mobile-main-toggle"><i class="icon-paragraph-justify3"></i></a></li>
            </ul>
        </div>
        <div class="navbar-collapse collapse" id="navbar-mobile">
            <ul class="nav navbar-nav">
                <li><a class="sidebar-control sidebar-main-toggle hidden-xs"><i class="icon-paragraph-justify3"></i></a></li>
            </ul>
            <div class="navbar-right">
                <ul class="nav navbar-nav navbar-right">
                    <!--This is Manage profile Segment-->
                    <li class="dropdown dropdown-user">
                        <a class="dropdown-toggle" data-toggle="dropdown">
                            <span>@loggedinUser.UserName</span>
                            <i class="caret"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li><a href="@Url.Action("UpdateProfile","Auth")"><i class="icon-cog5"></i>Update Profile</a></li>
                            <li class="divider"></li>
                            <li><a href="@Url.Action("Logout","Auth")"><i class="icon-switch2"></i> Logout</a></li>
                        </ul>
                    </li>
                    <!--This is Manage profile Segment-->
                </ul>
            </div>
        </div>
    </div>
    <!-- /main navbar -->
    <div class="page-container">
        <!-- Main sidebar -->
        <div class="sidebar sidebar-main sidebar-default">
            <div class="sidebar-content">
                <!-- User menu -->
                <div class="sidebar-user-material">
                    <div class="category-content">
                        <div class="sidebar-user-material-content">
                            <h6>@loggedinUser.UserName</h6>
                            <br />
                            <span class="text-size-small">@loggedinUser.Email</span>
                        </div>
                        <div class="sidebar-user-material-menu">
                            <a href="#user-nav" data-toggle="collapse"><span>My Account</span> <i class="caret"></i></a>
                        </div>
                    </div>
                    <div class="navigation-wrapper collapse" id="user-nav">
                        <ul class="navigation">
                            <li><a href="@Url.Action("UpdateProfile","Auth")"><i class="icon-cog5"></i> <span>Update Profile</span></a></li>
                            <li><a href="@Url.Action("Logout","Auth")"><i class="icon-switch2"></i> <span>Logout</span></a></li>
                        </ul>
                    </div>
                </div>
                <!-- /user menu -->
                <div class="sidebar-category sidebar-category-visible">
                    <div class="category-content no-padding">
                        <ul class="navigation navigation-main navigation-accordion">
                            @if (loggedinUser.IsAdmin == true)
                            {
                                <li class="navigation-header"><span>Main</span> <i class="icon-menu" title="Main pages"></i></li>
                                <li><a href="@Url.Action("Dashboard", "Admin")"><i class="icon-home4"></i> <span>Admin Dashboard</span></a></li>
                                <li>
                                    <a href="#"><i class="icon-user"></i> <span>Manage User</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("AddUser", "Admin")">Add User</a></li>
                                        <li><a href="@Url.Action("ViewUser", "Admin")">View Users Record</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#"><i class="fa fa-paw"></i> <span>Manage DogBreed</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("AddDogBreed", "Admin")">Add Dog Breed</a></li>
                                        <li><a href="@Url.Action("ViewDogBreed", "Admin")">View Dog Breeds Record</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#"><i class="glyphicon glyphicon-list-alt"></i> <span>Manage AuditLog</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("ViewAuditLog", "Admin")">View Audit Logs Record</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#"><i class="icon-profile"></i> <span>PROFILE</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("UpdateProfile", "Auth")">Profile Info </a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#"><i class="icon-switch2"></i> <span>Logout</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("Logout", "Auth")">Logout</a></li>
                                    </ul>
                                </li>
                            }
                            @if (loggedinUser.IsAdmin == false)
                            {
                                <li class="navigation-header"><span>Main</span> <i class="icon-menu" title="Main pages"></i></li>
                                <li><a href="@Url.Action("Dashboard", "Admin")"><i class="icon-home4"></i> <span>User Dashboard</span></a></li>
                                <li>
                                    <a href="#"><i class="fa fa-paw"></i> <span>Manage DogBreed</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("AddDogBreed", "Admin")">Add Dog Breed</a></li>
                                        <li><a href="@Url.Action("ViewDogBreed", "Admin")">View Dog Breeds Record</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#"><i class="icon-profile"></i> <span>PROFILE</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("UpdateProfile", "Auth")">Profile Info </a></li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="#"><i class="icon-switch2"></i> <span>Logout</span></a>
                                    <ul>
                                        <li><a href="@Url.Action("Logout", "Auth")">Logout</a></li>
                                    </ul>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
                <!--/main navigation-->
            </div>
        </div>
        <!-- /main sidebar -->
        <div class="bg-white">
            @RenderBody()
        </div>
    </div>
    <script>
        $("#alertMsg").fadeTo(4000, 500).slideUp(500, function () {
            $("#alertMsg").slideUp(600);
        });
    </script>
</body>
</html>