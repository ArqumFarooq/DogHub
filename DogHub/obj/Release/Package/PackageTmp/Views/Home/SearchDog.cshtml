@using DogHub.BL
@using DogHub.Models
@{
    ViewBag.Title = "DogHub - Explore Page";
    Layout = null;
}
@{
    DogHubEntities de = new DogHubEntities();
    var dogBreed = new DogBreedBL().GetAllDogBreeds(de).Where(x => (x.IsDeleted == false || x.IsDeleted == null) && (x.ImageUrl != null && x.DogName != null && x.Origin != null && x.LifeSpan != null)).ToList();
}

<!DOCTYPE html>
<htm>

    <head>
        <title>DogHub - Home</title>
        <link rel="icon" href="~/Content/assets/images/Favicons/D-Fav.jpg" type="image/gif" sizes="16x16">
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <meta content="" name="keywords" />
        <meta content="" name="author" />

        <!-- CSS Files
        ================================================== -->
        <link id="bootstrap" href="~/Content/Home/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link id="bootstrap-grid" href="~/Content/Home/css/bootstrap-grid.min.css" rel="stylesheet" type="text/css" />
        <link id="bootstrap-reboot" href="~/Content/Home/css/bootstrap-reboot.min.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/animate.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/owl.carousel.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/owl.theme.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/owl.transitions.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/magnific-popup.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/jquery.countdown.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/style.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/de-grey.css" rel="stylesheet" type="text/css" />
        <!-- color scheme -->

        <style>
            .doghub-logo {
                width: 35px;
                height: 36px;
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #212428;
                font-size: 40px;
                font-family: Arial, sans-serif;
                font-weight: bold;
                color: red;
                border: 1px solid #212428;
                image-rendering: pixelated;
            }
        </style>

        <link id="colors" href="~/Content/Home/css/colors/scheme-04.css" rel="stylesheet" type="text/css" />
        <link href="~/Content/Home/css/coloring.css" rel="stylesheet" type="text/css" />
    </head>

    <body class="dark-scheme de-grey">
        <div id="wrapper">

            <!-- header begin -->
            <header class="transparent scroll-dark">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="de-flex sm-pt10">
                                <div class="de-flex-col">
                                    <div class="de-flex-col">
                                        <!-- logo begin -->
                                        <div id="logo">
                                            <div class="doghub-logo">DogHub</div>
                                        </div>
                                        <!-- logo close -->
                                    </div>
                                </div>
                                <div class="de-flex-col header-col-mid">
                                    <!-- mainmenu begin -->
                                    <ul id="mainmenu">
                                        <li>
                                            <a href="@Url.Action("Index", "Home")">Home<span></span></a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("SearchDog", "Home")">Explore<span></span></a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Detail", "Home")">Detail<span></span></a>
                                        </li>
                                    </ul>
                                    <!-- mainmenu close -->
                                    <div class="menu_side_area">
                                        <a href="@Url.Action("Logout", "Auth")" class="btn-main"><i class="icon_wallet_alt"></i><span>Logout</span></a>
                                        <span id="menu-btn"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- header close -->
            <!-- content begin -->
            <div class="no-bottom no-top" id="content">
                <div id="top"></div>

                <!-- section begin -->
                <section id="subheader">
                    <div class="center-y relative text-center">
                        <div class="container">
                            <div class="row">

                                <div class="col-md-12 text-center">
                                    <h1>Explore</h1>
                                </div>
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- section close -->
                <!-- section begin -->
                <section aria-label="section">
                    <div class="container">
                        <div class="row wow fadeIn">
                            <div class="col-lg-12">
                                <div class="items_filter">
                                    <form class="row form-dark" id="form_quick_search">
                                        <div class="col text-center">
                                            <input class="form-control" id="searchInput" name="name_1" placeholder="search Dog Breed here..." type="text" />
                                            <a href="#" id="btn-submit"><i class="fa fa-search bg-color-secondary"></i></a>
                                            <div class="clearfix"></div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <div class="row wow fadeIn" id="breed-container">
                                @* Only dog cards here *@
                            </div>
                            <div class="col-md-12 text-center">
                                <a href="#" id="loadmore" class="btn-main wow fadeInUp lead">Load more</a>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="loadedCount" value="8" />
                    <input type="hidden" id="searchQuery" value="" />
                </section>

            </div>
            <!-- content close -->

            <a href="#" id="back-to-top"></a>

            <!-- footer begin -->
            <footer>
                <div class="subfooter">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="de-flex">
                                    <div class="de-flex-col">
                                        <a href="#">
                                            <span class="copy">&copy;  @DateTime.Now.ToString("Y") - DogHub by Arqum</span>
                                        </a>
                                    </div>
                                    <div class="de-flex-col">
                                        <div class="social-icons">
                                            <a href="#"><i class="fa fa-facebook fa-lg"></i></a>
                                            <a href="#"><i class="fa fa-twitter fa-lg"></i></a>
                                            <a href="#"><i class="fa fa-linkedin fa-lg"></i></a>
                                            <a href="#"><i class="fa fa-pinterest fa-lg"></i></a>
                                            <a href="#"><i class="fa fa-rss fa-lg"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </footer>
            <!-- footer close -->

        </div>

        <!-- Javascript Files
        ================================================== -->
        <script src="~/Content/Home/js/jquery.min.js"></script>
        <script src="~/Content/Home/js/bootstrap.min.js"></script>
        <script src="~/Content/Home/js/bootstrap.bundle.min.js"></script>
        <script src="~/Content/Home/js/wow.min.js"></script>
        <script src="~/Content/Home/js/jquery.isotope.min.js"></script>
        <script src="~/Content/Home/js/easing.js"></script>
        <script src="~/Content/Home/js/owl.carousel.js"></script>
        <script src="~/Content/Home/js/validation.js"></script>
        <script src="~/Content/Home/js/jquery.magnific-popup.min.js"></script>
        <script src="~/Content/Home/js/enquire.min.js"></script>
        <script src="~/Content/Home/js/jquery.plugin.js"></script>
        <script src="~/Content/Home/js/jquery.countTo.js"></script>
        <script src="~/Content/Home/js/jquery.countdown.js"></script>
        <script src="~/Content/Home/js/jquery.lazy.min.js"></script>
        <script src="~/Content/Home/js/jquery.lazy.plugins.min.js"></script>
        <script src="~/Content/Home/js/designesia.js"></script>
        <script>
            $(document).ready(function () {

                function renderBreeds(data, append = true) {
                    let container = $('#breed-container');
                    if (!append) container.empty();

                    container.append(data.html); // server returns partial HTML
                    $('#loadedCount').val(data.loadedCount);
                }

                $('#btn-submit').click(function (e) {
                    e.preventDefault();
                    let query = $('#searchInput').val();
                    $('#searchQuery').val(query);
                    $.get('/Home/SearchDogPartial', { search: query, skip: 0 }, function (data) {
                        renderBreeds(data, false);
                    });
                });

                $('#loadmore').click(function (e) {
                    e.preventDefault();
                    let skip = parseInt($('#loadedCount').val());
                    let query = $('#searchQuery').val();

                    $.get('/Home/SearchDogPartial', { search: query, skip: skip }, function (data) {
                        if (data.html.trim() !== '') {
                            renderBreeds(data, true);
                        } else {
                            $('#loadmore').hide();
                        }
                    });
                });
            });
        </script>
    </body>
</htm>